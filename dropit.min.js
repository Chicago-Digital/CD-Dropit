!function(t){t.fn.dropit=function(i){var n={init:function(i){return this.dropit.settings=t.extend({},this.dropit.defaults,i),this.each(function(){var i=t(this),n=t.fn.dropit.settings;i.addClass("dropit").find(">"+n.triggerParentEl+":has("+n.submenuEl+")").addClass("dropit-trigger").find(n.submenuEl).addClass("dropit-submenu"),i.off(n.action).on(n.action,n.triggerParentEl+":has("+n.submenuEl+") > "+n.triggerEl,function(){return"click"==n.action&&t(this).parents(n.triggerParentEl).hasClass("dropit-open")?(n.beforeHide.call(this),t(this).parents(n.triggerParentEl).removeClass("dropit-open"),n.afterHide.call(this),!1):(n.beforeHide.call(this),t(".dropit-open").removeClass("dropit-open"),n.afterHide.call(this),n.beforeShow.call(this),t(this).parents(n.triggerParentEl).addClass("dropit-open"),n.afterShow.call(this),!1)}),t(document).on("click",function(e){if(n.beforeHide.call(this),n.closeOnClick)i.find(".dropit-open").removeClass("dropit-open");else{e||(e=window.event);var o=e.target||e.srcElement;t(o).closest(i.find(n.submenuEl)).length||i.find(".dropit-open").removeClass("dropit-open")}n.afterHide.call(this)}),"mouseenter"==n.action&&i.on("mouseleave",".dropit-open",function(){if(n.beforeHide.call(this),n.closeOnClick)t(".dropit-open").removeClass("dropit-open");else{e||(e=window.event);var o=e.target||e.srcElement;t(o).closest(i.find(n.submenuEl)).length||t(".dropit-open").removeClass("dropit-open")}n.afterHide.call(this)}),n.afterLoad.call(this)})}};return n[i]?n[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?void t.error('Method "'+i+'" does not exist in dropit plugin!'):n.init.apply(this,arguments)},t.fn.dropit.defaults={action:"click",submenuEl:"ul",triggerEl:"a",triggerParentEl:"li",closeOnClick:!1,afterLoad:function(){},beforeShow:function(){},afterShow:function(){},beforeHide:function(){},afterHide:function(){}},t.fn.dropit.settings={}}(jQuery);